<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <title></title>
    <script src="js/mui.min.js"></script>
    <link rel="stylesheet" type="text/css" href="css/mui.min.css"/>
   	<link rel="stylesheet" type="text/css" href="css/own.css"/>
   	<link rel="stylesheet" type="text/css" href="css/iconfont.css"/>
   	<style type="text/css">
   		html,body{background-color: #efeff4;}
		.mui-active .mui-icon,
		.mui-active .mui-tab-label {
			color: #41cea9;
		}
		#nav-title{
			display: none;
		}
		input[type='search']
		{
			color: #fff;
		    background-color: none;
		}
		.mui-search:before{
			color: #fff;
		}
		.mui-search .mui-placeholder
		{
		    color: #fff;
		}
		.mui-search .mui-placeholder .mui-icon
		{
		    color: #fff;
		}
		.mui-input-row .mui-input-speech ~ .mui-icon-speech {
			color: #fff;
		}

   	</style>
</head>
<body class="own-gray-color">
	<header class="mui-bar mui-bar-nav own-main-background-color">
		<div class="mui-input-row mui-search" id="search">
			<input type="search" id="search-input" class="mui-input-speech mui-input-clear" placeholder="友邦大药房">
		</div>
		<h1 id="nav-title" class="mui-title"></h1>
	</header>
	<nav class="mui-bar mui-bar-tab">
		<a class="mui-tab-item mui-active" href="barItem/home.html" id="home">
			<span class="mui-icon iconfont icon-home"></span>
			<span class="mui-tab-label">首页</span>
		</a>
		<a class="mui-tab-item" href="barItem/category.html" id="category">
			<span class="mui-icon iconfont icon-fenlei"></span>
			<span class="mui-tab-label">分类</span>
		</a>
		<a class="mui-tab-item" href="barItem/cart.html" id="cart">
			<span class="mui-icon iconfont icon-cart"></span>
			<span class="mui-tab-label">购物车</span>
		</a>
		<a class="mui-tab-item" href="barItem/mine.html" id="mine">
			<span class="mui-icon iconfont icon-wode"></span>
			<span class="mui-tab-label">我的</span>
		</a>
	</nav>
	<script type="text/javascript" src="js/mui.min.js" charset="UTF-8"></script>
	<script type="text/javascript" src="js/common.js" charset="UTF-8"></script>
	<script type="text/javascript" charset="UTF-8">
		mui.init()
		var honey={
			barItem:['home','category','cart','mine'],
			barWebViews:[],
			contentStyle:{top:'45px',bottom:'51px',scrollIndicator:'none'},
			title:document.getElementById('nav-title'),//标题
			search:document.getElementById('search'),
			//初始化所有bar页面
		    initWebViews:function(){
		    	//预加载页面
				honey.preloadWebViews()
				//设置状态栏颜色
				plus.navigator.setStatusBarBackground( "#41cea9" );
				//设置只支持竖屏幕显示
				plus.screen.lockOrientation("portrait-primary");
				//绑定菜单事件
				honey.bindBaritem()
				
				//搜索框事件
				mui('#search').on('tap','input',function(){
					alert('aa')
				})
			},
			preloadDetailView:function(){//加载详情页
				preloadGoodsDetail()
			},
			preloadWebViews:function(){//预加载页面
				honey.mainWebview = plus.webview.currentWebview();
				for (var i = 0; i < honey.barItem.length; i++) {
					var id=honey.barItem[i];
					honey.barWebViews[id] = mui.preload({
						id:id,
						url:'barItem/'+id+'.html',
						styles:{
							top:'44px',
							bottom: '51px',
							left: '0px',
							bounce: 'vertical',
							bounceBackground: '#f8f8f8',
							scrollIndicator:'none'
						},
						waiting:{
							autoShow:false
						}
					});
					honey.barWebViews[id].hide();
					honey.mainWebview.append(honey.barWebViews[id]);
				}
				honey.barWebViews[honey.barItem[0]].show();
				honey.curBarItemWebview = honey.barItem[0];
			},
			bindBaritem:function(){//绑定菜单事件
				mui('.mui-bar-tab').on('tap','.mui-tab-item',function(){
					var id=this.getAttribute('id');
					if(id!=honey.curBarItemWebview){
						//更换标题
						if(id=='home'){
							honey.search.style.display="block";
							honey.title.style.display="none";
						}else{
							if(honey.curBarItemWebview=='home'){
								honey.search.style.display="none";
								honey.title.style.display="block";
							}
							honey.title.innerText = this.querySelector('.mui-tab-label').innerText;
						}
						//切换baritemwebview
						honey.barWebViews[id].show();
						honey.curBarItemWebview = honey.barItem[id];
					}
				});
			}
		};
		mui.plusReady(function(){
			honey.initWebViews()
			honey.preloadDetailView()
		})
	
	</script>
</body>
</html>